!function(){function a(a,d){function e(){for(;i=m<l.length&&a>n;){var b=m++,d=l[b],e=c.call(d,1);e.push(f(b)),++n,d[0].apply(null,e)}}function f(a){return function(b,c){--n,null==p&&(null!=b?(p=b,m=o=0/0,g()):(l[a]=c,--o?i||e():g()))}}function g(){null!=p?q(p):j?q(p,l):q.apply(null,[p].concat(l))}null==d&&(null!==a&&"object"==typeof a?(d=a,a=null):d={autoStart:!0});var h,i,j,k=null==d.autoStart?!0:d.autoStart,l=[],m=0,n=0,o=0,p=null,q=b,r=k;return a||(a=1/0),h={defer:function(){return p||(l.push(arguments),++o,r&&e()),h},await:function(a){return q=a,j=!1,o||g(),h},awaitAll:function(a){return q=a,j=!0,o||g(),h},start:function(){if(r)throw"Can't start queue twice.";return r=!0,e(),h}}}function b(){}var c=[].slice;a.version="1.0.9","function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.queue=a}(),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a,d,e,f){var g,h;this.cookies=d,this.jsonp=e,this.queueClass=f,this._sendIsEnabled=c(this._sendIsEnabled,this),this._sendFact=c(this._sendFact,this),this._setUserId=c(this._setUserId,this),this._resolveSessionId=c(this._resolveSessionId,this),this._resolveUserId=c(this._resolveUserId,this),this.options={isEnabledTimeout:500};for(g in a)h=a[g],this.options[g]=h;null==this.cookies&&(this.cookies=b.Cookies),null==this.jsonp&&(this.jsonp=b.JSONP),this.openFacts=0,null==this.queueClass&&(this.queueClass=b.queue),this._resolveUserId(),this._resolveSessionId(),this._factQ=f(),this._featQ=f({autoStart:!1}),this._startFeatQ()}return a.prototype._resolveUserId=function(){return this.options.userId(this._setUserId)},a.prototype._resolveSessionId=function(){return this.sessionId=this.cookies.getItem("featSID")},a.prototype._setUserId=function(a){return this.userId=a},a.prototype._resolveFact=function(a){return function(b){return function(c){return b._sendFact(a,c)}}(this)},a.prototype._sendFact=function(a,b){return this.jsonp(""+this.options.apiUrl+"/add-fact?userId="+this.userId+"&sessionId="+this.sessionId+"&key="+a+"&value="+b,function(){return function(){}}(this))},a.prototype._startFeatQ=function(){return setTimeout(this._featQ.start,this.options.isEnabledTimeout)},a.prototype.addFact=function(a,b){return this._factQ.defer(b,this._resolveFact(a))},a.prototype._sendIsEnabled=function(a,b){return this.jsonp(""+this.options.apiUrl+"/is-enabled?userId="+this.userId+"&sessionId="+this.sessionId+"&key="+a,function(){return function(a){return b(a)}}(this))},a.prototype.isEnabled=function(a,b){return this._featQ.defer(this._sendIsEnabled,a,b)},a}(),b="undefined"!=typeof exports&&null!==exports?exports:window,b.Featness=a}.call(this),function(){var a,b;a=function(){function a(a){this.document=a}return a.prototype.getItem=function(a){return decodeURIComponent(this.document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},a}(),b="undefined"!=typeof exports&&null!==exports?exports:window,b.Cookies=new a("undefined"!=typeof document&&null!==document&&document||null),b.CookiesClass=a}.call(this),function(){var a;a="undefined"!=typeof exports&&null!==exports?exports:window,function(a){var b;b=function(b,c,d,e){var f,g,h,i,j,k,l;if(b=b||"",c=c||{},d=d||"",e=e||function(){},g=function(a){var b,c;c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},"object"==typeof c){for(k="",j=g(c),h=0;h<j.length;)k+=encodeURIComponent(j[h])+"="+encodeURIComponent(c[j[h]]),h!==j.length-1&&(k+="&"),h++;b+="?"+k}else"function"==typeof c&&(d=c,e=d);"function"==typeof d&&(e=d,d="callback"),Date.now||(Date.now=function(){return(new Date).getTime()}),l=Date.now(),f="jsonp"+Math.round(l+1000001*Math.random()),a[f]=function(b){e(b),delete a[f]},b+=-1===b.indexOf("?")?"?":"&",i=document.createElement("script"),i.setAttribute("src",b+d+"="+f),document.getElementsByTagName("head")[0].appendChild(i)},a.JSONP=b}(a)}.call(this);